import{r as a,a as z,K as L,j as e,C as R,R as A,o as I,O as w,y as C,P,Q as U}from"./index-5a5fd040.js";import"./BreadcrumbWidget-c34707b9.js";import{p as $,q}from"./endPoints-af565a7d.js";import"./interceptor-00bddfa3.js";const G=a.memo(()=>{const[h,y]=a.useState(""),[V,E]=a.useState(!1),[B,k]=a.useState(""),[u,f]=a.useState(""),[D,N]=a.useState(""),[x,g]=a.useState(0),[b,v]=a.useState(0),[p,j]=a.useState(""),{t:m}=z();a.useEffect(()=>{const s=L(U,async n=>{var c,o,l,r;if(n){y(n.uid),k(n.displayName);const d=w(C,"webAppUsers",n.uid),t=await P(d);if(t.exists()){const i=t.data();f(((c=i==null?void 0:i.subscription)==null?void 0:c.planType)||""),N(((o=i==null?void 0:i.subscription)==null?void 0:o.planEndDate)||""),j(((l=i==null?void 0:i.subscription)==null?void 0:l.status)||""),S(((r=i==null?void 0:i.subscription)==null?void 0:r.planEndDate)||"")}else console.log("No such user data found in Firestore")}else y(""),f(""),j("")});return()=>s()},[]);const S=s=>{const n=new Date,o=new Date(s)-n;if(o>0){const l=Math.ceil(o/864e5),r=Math.floor(l/30),d=l%30;v(r),g(d)}else v(0),g(0)},F=s=>{$(s,h).then(n=>{const{session:c}=n.data;window.location=c.url}).catch(n=>{console.error("Checkout failed:",n)})},M=()=>{q(h).then(s=>{alert("Subscription canceled successfully."),E(!0);const n=w(C,"webAppUsers",h);P(n).then(c=>{var o,l,r,d;if(c.exists()){const t=c.data();f(((o=t==null?void 0:t.subscription)==null?void 0:o.planType)||""),N(((l=t==null?void 0:t.subscription)==null?void 0:l.planEndDate)||""),j(((r=t==null?void 0:t.subscription)==null?void 0:r.status)||""),S(((d=t==null?void 0:t.subscription)==null?void 0:d.planEndDate)||"")}else console.log("No such user data found in Firestore")})}).catch(s=>{console.error("Failed to cancel subscription:",s)})},T=[{id:1,name:"Monthly",price:"4",duration:m("pricing.month"),description:"Get started with our basic 30 days plan perfect for essential entertainment.",benefits:["Fully access for 30 days","Billing Monthly"]},{id:2,name:"3 Months",price:"12",duration:`3 ${m("pricing.month")}`,description:"Dive into a world of captivating content for a three-months period.",benefits:["Fully access for 3 months","Get 15 days free"]},{id:3,name:"6 Months",price:"20",duration:`6 ${m("pricing.month")}`,description:"Enjoy access to a wide range of movies and TV shows, for 6 months.",benefits:["Fully access for 6 months","Pay for 5 months and get 6th month free"]},{id:4,name:"Annually",price:"40",duration:`12 ${m("pricing.month")}`,description:"Experience the ultimate in streaming with our VIP 12-months Plan.",benefits:["Fully access for 12 months","Pay for 10 months and get 2 months free"]}];return e.jsx(a.Fragment,{children:e.jsx("div",{className:"section-padding",children:e.jsxs(R,{children:[e.jsx("h1",{className:"plan-name text-capitalize text-body text-center my-5 ",children:"Please select a plan"}),e.jsx(A,{className:"d-flex",children:T.map((s,n)=>e.jsx(I,{lg:"3",md:"6",className:"d-flex mb-3 mb-lg-0",children:e.jsxs("div",{className:"pricing-plan-wrapper d-flex flex-column",children:[e.jsxs("div",{className:"pricing-plan-header",children:[e.jsx("h4",{className:"plan-name text-capitalize text-body",children:s.name}),e.jsxs("span",{className:"main-price text-primary",children:["$",s.price]})," ",e.jsxs("span",{className:"font-size-18",children:["/ ",s.duration]})]}),e.jsx("div",{className:"pricing-details flex-grow-1",children:e.jsx("div",{className:"pricing-plan-description",children:e.jsxs("ul",{className:"list-inline p-0",children:[e.jsx("li",{children:e.jsx("span",{className:"font-size-18 fw-500",children:s.description})}),s.benefits.map((c,o)=>e.jsxs("li",{children:[e.jsx("i",{className:"fas fa-check text-primary"}),e.jsx("span",{className:"font-size-18 fw-500",children:c})]},o))]})})}),e.jsx("div",{className:"pricing-plan-footer",children:e.jsx("div",{className:"iq-button",children:s.name===u&&p==="active"?e.jsxs("div",{children:[e.jsxs("div",{className:"btn text-uppercase position-relative disabled",children:[e.jsx("span",{className:"button-text",children:"Subscribed"}),e.jsx("i",{className:"fas fa-check"})," "]}),e.jsxs("button",{onClick:M,className:"btn text-uppercase position-relative",children:[e.jsx("span",{className:"button-text",children:"Cancel Subscription "}),e.jsx("i",{className:"fa-solid fa-trash"})," "]})]}):s.name===u&&p==="cancelled"&&(b>0||x>0)?e.jsx("div",{children:e.jsxs("button",{className:"btn text-uppercase position-relative disabled",children:[e.jsxs("span",{className:"button-text",children:["Cancelled: ",b," months and ",x," days left"]}),e.jsx("i",{className:"fas fa-clock"})," "]})}):e.jsxs("button",{onClick:()=>F(s.price),className:"btn text-uppercase position-relative",disabled:p==="active"&&s.name!==u||p==="cancelled"&&(b>0||x>0),children:[e.jsx("span",{className:"button-text",children:"Choose"}),e.jsx("i",{className:"fa-solid fa-play"})," "]})})})]})},n))})]})})})});G.displayName="PricingPage";export{G as default};
